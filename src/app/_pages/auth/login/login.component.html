<div class="relative flex h-screen flex-col justify-center px-6 py-12 lg:px-8 overflow-hidden">

  <!-- Desktop Only Link -->
  <!-- <a routerLink="/"
    class="absolute top-24 right-4 hidden md:flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500">
    <span class="text-xl mr-2">&#8592;</span>
    <span>Voltar para a Página Inicial</span>
  </a> -->

  <!-- Mobile Only Link -->
  <a routerLink="/"
    class="absolute top-4 right-4 flex md:hidden items-center px-4 py-2 text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500">
    <span class="text-xl mr-2">&#8592;</span>
    <span>Voltar</span>
  </a>

  <!-- Logo and Title -->
  <div class="sm:mx-auto sm:w-full sm:max-w-sm">
    <img class="mx-auto h-16 w-auto" src="flo-logo-11.webp" alt="Your Company">
    <h2 class="mt-6 text-center text-2xl/9 font-bold tracking-tight text-gray-900">Sign in to your account</h2>
  </div>

  <!-- Login Form -->
  <div class="mt-10 sm:mx-auto sm:w-full sm:max-w-sm">
    <form [formGroup]="loginForm" (ngSubmit)="submit()" class="space-y-6">
      <!-- Email -->
      <div>
        <label for="email" class="block text-sm font-medium leading-6 text-gray-900">Endereço de Email</label>
        <div class="mt-2">
          <input id="email" formControlName="email" type="email" autocomplete="email" required
            class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
        </div>
        <p *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched" class="text-red-500 text-xs mt-1">
          Email inválido.</p>
      </div>

      <!-- Password -->
      <div class="relative">
        <div class="flex items-center justify-between">
          <label for="password" class="block text-sm font-medium leading-6 text-gray-900">Palavra-passe</label>
          <div class="text-sm">
            <a routerLink="/forgot-password" class="font-semibold text-black hover:text-indigo-500">
              Esqueceu-se da palavra-passe?
            </a>
          </div>
        </div>
        <div class="mt-2 relative">
          <input id="password" formControlName="password" [type]="showPassword ? 'text' : 'password'"
            autocomplete="current-password" required
            class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 
           placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pr-10">

          <!-- Eye Icon -->
          <button type="button" (click)="togglePasswordVisibility()"
            class="absolute inset-y-0 right-2 flex items-center">

            <!-- Show Password Icon -->
            <svg *ngIf="showPassword" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
              class="h-5 w-5 text-gray-500">
              <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" />
              <path fill-rule="evenodd"
                d="M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z"
                clip-rule="evenodd" />
            </svg>

            <!-- Hide Password Icon -->
            <svg *ngIf="!showPassword" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
              class="h-5 w-5 text-gray-500">
              <path
                d="M3.53 2.47a.75.75 0 0 0-1.06 1.06l18 18a.75.75 0 1 0 1.06-1.06l-18-18ZM22.676 12.553a11.249 11.249 0 0 1-2.631 4.31l-3.099-3.099a5.25 5.25 0 0 0-6.71-6.71L7.759 4.577a11.217 11.217 0 0 1 4.242-.827c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113Z" />
              <path
                d="M15.75 12c0 .18-.013.357-.037.53l-4.244-4.243A3.75 3.75 0 0 1 15.75 12ZM12.53 15.713l-4.243-4.244a3.75 3.75 0 0 0 4.244 4.243Z" />
              <path
                d="M6.75 12c0-.619.107-1.213.304-1.764l-3.1-3.1a11.25 11.25 0 0 0-2.63 4.31c-.12.362-.12.752 0 1.114 1.489 4.467 5.704 7.69 10.675 7.69 1.5 0 2.933-.294 4.242-.827l-2.477-2.477A5.25 5.25 0 0 1 6.75 12Z" />
            </svg>

          </button>
        </div>

        <!-- Password Validation Message -->
        <p *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
          class="text-red-500 text-xs mt-1">
          A palavra-passe é obrigatória.
        </p>
      </div>


      <!-- Submit Button -->
      <div>
        <button type="submit" [disabled]="loginForm.invalid || authManagerSignal.isLoadingState"
          class="flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:bg-gray-400">
          <span>Iniciar Sessão</span>

          <!-- Spinner when loading -->
          <svg *ngIf="authManagerSignal.isLoadingState" class="ml-2 h-5 w-5 animate-spin text-white"
            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M12 2a10 10 0 0 1 10 10h-4a6 6 0 0 0-6-6V2z"></path>
          </svg>
        </button>
      </div>

      <!-- OR separator -->
      <div class="relative my-4 flex items-center">
        <div class="w-full border-t border-gray-300"></div>
        <span class="mx-4 text-sm font-medium text-gray-500">ou</span>
        <div class="w-full border-t border-gray-300"></div>
      </div>

      <!-- Google Sign-In Button -->
      <div id="google-signin-btn"></div>


    </form>

    <div *ngIf="authManagerSignal.errorMessageState" class="rounded-md bg-red-50 p-4 mt-2">
      <div class="flex">
        <div class="shrink-0">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-5 text-red-400">
            <path fill-rule="evenodd"
              d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z"
              clip-rule="evenodd" />
          </svg>
        </div>
        <div class="ml-3">
          <p class="text-sm font-medium text-red-800">{{ authManagerSignal.errorMessageState }}</p>
        </div>
      </div>
    </div>

    <!-- Register Link -->
    <p class="mt-10 text-center text-sm text-gray-500">
      Ainda não tem conta?
      <a [href]="'/' + currentLanguage + '/register'" class="font-semibold leading-6 text-black hover:text-indigo-500">
        Registe-se agora para pedir os seus transportes!
      </a>
    </p>



    <!-- <div class="google-auth-container pt-6">
      <div id="google-signin-btn"></div>
      <div *ngIf="user" class="user-info">
        <img [src]="user.picture" alt="User Image" />
        <h3>{{ user.name }}</h3>
        <p>{{ user.email }}</p>
        <button (click)="signOut()">Sign Out</button>
      </div>
    </div> -->

  </div>
</div>